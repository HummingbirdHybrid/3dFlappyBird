<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>Game Template</title>
    <script src="vendor/three.js/build/three.min.js"></script>
    <script src="vendor/three.js/build/WebglSupport.js"></script>
    <script src="vendor/three.js/build/OrbitControls.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden
        }
        canvas { width: 100%; height: 100% }
    </style>
</head>
<body>
<script>

    var scene, camera, renderer;
    var geometry, material;
    var plane,skySphere,persona,obsticle1,obsticle2;
    var sceneSpeed=1;
    if (Detector.webgl) {
            init();
            animate();
    } else {
        var warning = Detector.getWebGLErrorMessage();
        document.body.appendChild(warning);
    }

    function init() {

        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera( 75, window.outerWidth / window.outerHeight, 0.1, 10000 );
        camera.position.z = 500;

        var controls = new THREE.OrbitControls(camera)

        var  galaxyTexture	= THREE.ImageUtils.loadTexture('images/galaxy_starfield.png');
        material	= new THREE.MeshBasicMaterial({
            map	: galaxyTexture,
            side	: THREE.BackSide,
            color	: 0x808080,
        });
         geometry	= new THREE.SphereGeometry(9000, 32, 32);
         skySphere	= new THREE.Mesh(geometry, material);
         scene.add(skySphere);

        light = new THREE.PointLight(0xFFFF00);
        light.position.set(100, 0, 250);
        scene.add(light);

        geometry = new THREE.PlaneGeometry( window.innerWidth, window.innerHeight , 10, 10 );
        material = new THREE.MeshLambertMaterial(
            {
                color: 0x4BD121
            });
        plane = new THREE.Mesh(geometry,material);

        scene.add( plane );

        geometry = new THREE.CubeGeometry(100,100,100);
        material = new THREE.MeshLambertMaterial({
            color: 'red',
            wireframe: true
        });
        persona = new THREE.Mesh(geometry,material);
        persona.position.z=60;
        persona.position.x=-400;
        scene.add(persona);

        geometry = new THREE.CubeGeometry(100,900,100);
        material = new THREE.MeshLambertMaterial(
            {
                color:'black',

            }
        );
        obsticle1 = new THREE.Mesh(geometry,material);
        obsticle1.position.y=plane.geometry.parameters.height/2;
        obsticle1.position.z = 50;
        scene.add(obsticle1);

        obsticle2 = new THREE.Mesh(geometry,material);
        obsticle2.position.y=-plane.geometry.parameters.height/2;
        obsticle2.position.x=plane.geometry.parameters.width/2;
        obsticle2.position.z = 50;
        scene.add(obsticle2);


        window.addEventListener('resize', function(){
            renderer.setSize( window.innerWidth, window.innerHeight );
            camera.aspect	= window.innerWidth / window.innerHeight;

            camera.updateProjectionMatrix()
        }, false)

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize( window.innerWidth, window.innerHeight );



        document.body.appendChild( renderer.domElement );

    }

    window.addEventListener('keydown',function () {
        persona.position.y+=5;
    })

    function animate() {

        requestAnimationFrame( animate );

        camera.position.x+=sceneSpeed;
        plane.position.x+=sceneSpeed;
        light.position.x+=sceneSpeed;
        skySphere.position.x+=sceneSpeed;

        persona.position.x+=sceneSpeed;
        persona.position.y-=sceneSpeed;
        renderer.render( scene, camera );



    }

</script>
</body>
</html>
